port: 7890
socks-port: 7891
allow-lan: true
mode: rule
log-level: info
external-controller: 127.0.0.1:9090

dns:
  enable: true
  ipv6: false
  default-nameserver: [223.5.5.5, 119.29.29.29]
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query

# 节点配置
proxies:
  - name: "Trojan_TLS-gt90pyqe"
    type: trojan
    server: vps.epochtx.me
    port: 443
    password: ruZVMvaL87
    udp: true
    sni: vps.epochtx.me
    alpn: [h2, http/1.1]
    client-fingerprint: chrome
    skip-cert-verify: false

  - name: "机场4-节点"
    type: trojan
    server: vpn.epochtx.tech
    port: 443
    password: TtCZjUurKb
    udp: true
    sni: vpn.epochtx.tech
    skip-cert-verify: true
    alpn: [h2, http/1.1]

# 策略组配置
proxy-groups:
  - name: 节点选择
    type: select
    proxies:
      - Trojan_TLS-gt90pyqe
      - 机场4-节点
      - DIRECT

  - name: 智能助理
    type: select
    proxies: [节点选择, Trojan_TLS-gt90pyqe, 机场4-节点]

  - name: AppleAI
    type: select
    proxies: [节点选择, Trojan_TLS-gt90pyqe, 机场4-节点, DIRECT]

  - name: TikTok
    type: select
    proxies: [节点选择, Trojan_TLS-gt90pyqe, 机场4-节点]

  - name: 国内媒体
    type: select
    proxies: [DIRECT, 节点选择]

  - name: 电报信息
    type: select
    proxies: [节点选择, Trojan_TLS-gt90pyqe, 机场4-节点]

  - name: Instagram
    type: select
    proxies: [节点选择, Trojan_TLS-gt90pyqe, 机场4-节点]

  - name: Line
    type: select
    proxies: [节点选择, Trojan_TLS-gt90pyqe, 机场4-节点]

  - name: 谷歌服务
    type: select
    proxies: [节点选择, Trojan_TLS-gt90pyqe, 机场4-节点]

  - name: 游戏平台
    type: select
    proxies: [节点选择, DIRECT]

  - name: 油管视频
    type: select
    proxies: [节点选择, Trojan_TLS-gt90pyqe, 机场4-节点]

  - name: 奈飞视频
    type: select
    proxies: [节点选择, Trojan_TLS-gt90pyqe, 机场4-节点]

  - name: 迪士尼+
    type: select
    proxies: [节点选择, Trojan_TLS-gt90pyqe, 机场4-节点]

  - name: 哔哩哔哩
    type: select
    proxies: [DIRECT, 节点选择]

# 规则集 (Rule Providers)
rule-providers:
  DouYin:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/DouYin/DouYin.list"
    path: ./ruleset/douyin.yaml
    interval: 86400
  XiaoHongShu:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/XiaoHongShu/XiaoHongShu.list"
    path: ./ruleset/xiaohongshu.yaml
    interval: 86400
  OpenAI:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/EAlyce/conf/refs/heads/main/Rule/OpenAI.list"
    path: ./ruleset/openai.yaml
    interval: 86400
  AppleAI:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/zjt666666zjt/zjt666666zjt/refs/heads/main/AI.txt"
    path: ./ruleset/appleai.yaml
    interval: 86400
  TikTok:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/TikTok/TikTok.list"
    path: ./ruleset/tiktok.yaml
    interval: 86400
  Telegram:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Telegram/Telegram.list"
    path: ./ruleset/telegram.yaml
    interval: 86400
  Instagram:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/Instagram/Instagram.list"
    path: ./ruleset/instagram.yaml
    interval: 86400
  Line:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Line/Line.list"
    path: ./ruleset/line.yaml
    interval: 86400
  Google:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Google/Google.list"
    path: ./ruleset/google.yaml
    interval: 86400
  Epic:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Epic/Epic.list"
    path: ./ruleset/epic.yaml
    interval: 86400
  Sony:
    输入: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Sony/Sony.list"
    path: ./ruleset/sony.yaml
    interval: 86400
  Steam:
    输入: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Steam/Steam.list"
    path: ./ruleset/steam.yaml
    interval: 86400
  Nintendo:
    输入: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Nintendo/Nintendo.list"
    path: ./ruleset/nintendo.yaml
    interval: 86400
  YouTube:
    输入: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/YouTube/YouTube.list"
    path: ./ruleset/youtube.yaml
    interval: 86400
  Netflix:
    输入: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Netflix/Netflix.list"
    path: ./ruleset/netflix.yaml
    interval: 86400
  Disney:
    输入: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Disney/Disney.list"
    path: ./ruleset/disney.yaml
    interval: 86400
  BiliBili:
    输入: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/BiliBili/BiliBili.list"
    path: ./ruleset/bilibili.yaml
    interval: 86400
  ChinaMax:
    输入: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/ChinaMax/ChinaMax_All.list"
    path: ./ruleset/chinamax.yaml
    interval: 86400

# 规则逻辑
rules:
  - RULE-SET,ChinaMax,DIRECT
  - RULE-SET,DouYin,国内媒体
  - RULE-SET,XiaoHongShu,国内媒体
  - RULE-SET,OpenAI,智能助理
  - RULE-SET,AppleAI,AppleAI
  - RULE-SET,TikTok,TikTok
  - RULE-SET,Telegram,电报信息
  - RULE-SET,Instagram,Instagram
  - RULE-SET,Line,Line
  - RULE-SET,Google,谷歌服务,no-resolve
  - RULE-SET,Epic,游戏平台
  - RULE-SET,Sony,游戏平台
  - RULE-SET,Steam,游戏平台
  - RULE-SET,Nintendo,游戏平台
  - RULE-SET,YouTube,油管视频
  - RULE-SET,Netflix,奈飞视频
  - RULE-SET,Disney,迪士尼+
  - RULE-SET,BiliBili,哔哩哔哩
  
  # 广告/追踪屏蔽
  - DOMAIN-SUFFIX,applovin.com,REJECT
  - DOMAIN-SUFFIX,applvn.com,REJECT
  - DOMAIN-SUFFIX,smadex.com,REJECT
  - DOMAIN-SUFFIX,impression.link,REJECT
  - DOMAIN-SUFFIX,axon.ai,REJECT
  - DOMAIN-SUFFIX,appsflyer.com,REJECT
  - DOMAIN-SUFFIX,adjust.com,REJECT

  # 局域网与兜底
  - GEOIP,LAN,DIRECT
  - MATCH,节点选择
